{% block sw_cms_config_moorl_shop_the_look %}
    <div class="sw-cms-el-config-moorl-shop-the-look">
        <sw-tabs default-item="general">
            <template #default="{ active }">
                {% block sw_cms_config_moorl_shop_the_look_tabs %}
                    <sw-tabs-item
                            :title="$tc(snippetPrefix + 'tab.general')"
                            name="general"
                            :activeTab="active"
                    >
                        {{ $tc(snippetPrefix + 'tab.general') }}
                    </sw-tabs-item>

                    <sw-tabs-item
                            v-if="products"
                            :title="$tc(snippetPrefix + 'tab.hotspots')"
                            name="hotspots"
                            :activeTab="active"
                    >
                        {{ $tc(snippetPrefix + 'tab.hotspots') }}
                    </sw-tabs-item>

                    <sw-tabs-item
                            :title="$tc(snippetPrefix + 'tab.other')"
                            name="other"
                            :activeTab="active"
                    >
                        {{ $tc(snippetPrefix + 'tab.other') }}
                    </sw-tabs-item>
                {% endblock %}
            </template>

            <template #content="{ active }">
                {% block sw_cms_config_moorl_shop_the_look_content %}
                    <sw-container v-if="active === 'general'">
                        <sw-container columns="1fr 1fr" gap="0 10px">
                            <sw-select-field
                                    :label="$tc('moorl-cms.elements.general.config.label.style')"
                                    v-model:value="element.config.style.value"
                            >
                                <option value="image-products">{{ $tc(snippetPrefix + 'label.imageProducts') }}</option>
                                <option value="products-image">{{ $tc(snippetPrefix + 'label.productsImage') }}</option>
                                <option value="products">{{ $tc(snippetPrefix + 'label.products') }}</option>
                                <option value="image">{{ $tc(snippetPrefix + 'label.image') }}</option>
                            </sw-select-field>

                            <sw-text-field
                                    :label="$tc(snippetPrefix + 'label.productsWidth')"
                                    v-model:value="element.config.productsWidth.value"
                            />

                            <sw-switch-field
                                    v-model:value="element.config.enableAnimatedHotspots.value"
                                    bordered
                                    :label="$tc(snippetPrefix + 'label.enableAnimatedHotspots')"
                            />

                            <sw-switch-field
                                    v-model:value="element.config.videoActive.value"
                                    bordered
                                    :label="$tc(snippetPrefix + 'label.videoActive')"
                            />
                        </sw-container>

                        <sw-media-upload-v2
                                :uploadTag="uploadTag"
                                :source="previewSource"
                                :allowMultiSelect="false"
                                :defaultFolder="cmsPageState.pageEntityName"
                                :caption="$tc('sw-cms.elements.general.config.caption.mediaUpload')"
                                @media-upload-sidebar-open="onOpenMediaModal"
                                @media-upload-remove-image="onImageRemove"
                        />

                        <sw-upload-listener
                                :uploadTag="uploadTag"
                                autoUpload
                                @media-upload-finish="onImageUpload"
                        />

                        <sw-cms-el-config-moorl-product-buy-list
                                v-bind="{ element }"
                                @products-change="onProductsChange"
                        />
                    </sw-container>

                    <sw-container v-if="products && active === 'hotspots'">
                        <div class="hotspots">
                            <div class="hotspot-area">
                                <div class="hotspot-area-image">
                                    <video v-if="element.config.videoActive.value"
                                           autoplay
                                           muted
                                           loop
                                           class="video">
                                        <source :src="mediaUrl" type="video/mp4">
                                    </video>

                                    <img v-else :src="mediaUrl">

                                    <div class="hotspot-area-image-overlay" ref="hotspotArea">
                                        <template v-for="product in products">
                                            <div
                                                    v-if="element.config.productMediaHotspots.value[product.id]"
                                                    :style="pointerPositionCss(product.id)"
                                                    class="hotspot-area-image-overlay-dot"
                                                    v-tooltip="{message: product.name, position: 'top'}"
                                            ></div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <div class="product-list">
                                <div class="product-list-content">
                                    <template v-for="product in products">
                                        <div v-if="element.config.productMediaHotspots.value[product.id]" class="product-list-content-item">
                                            <div style="grid-area: a;">{{ product.translated.name }}</div>

                                            <sw-number-field
                                                    style="grid-area: b;"
                                                    min="0"
                                                    max="100"
                                                    step="1"
                                                    :placeholder="$tc(snippetPrefix + 'label.topPosition')"
                                                    v-model:value="element.config.productMediaHotspots.value[product.id].top"
                                            />

                                            <sw-number-field
                                                    style="grid-area: c;"
                                                    min="0"
                                                    max="100"
                                                    step="1"
                                                    :placeholder="$tc(snippetPrefix + 'label.leftPosition')"
                                                    v-model:value="element.config.productMediaHotspots.value[product.id].left"
                                            />
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </sw-container>

                    <sw-container v-if="active === 'other'">
                        <sw-container columns="1fr 1fr" gap="0 10px">
                            <sw-text-field
                                    v-model:value="element.config.custom1.value"
                                    :label="$tc(snippetPrefix + 'label.custom1')"
                            />

                            <sw-text-field
                                    v-model:value="element.config.custom2.value"
                                    :label="$tc(snippetPrefix + 'label.custom2')"
                            />

                            <sw-text-field
                                    v-model:value="element.config.custom3.value"
                                    :label="$tc(snippetPrefix + 'label.custom3')"
                            />

                            <sw-text-field
                                    v-model:value="element.config.custom4.value"
                                    :label="$tc(snippetPrefix + 'label.custom4')"
                            />

                            <sw-switch-field
                                    v-model:value="element.config.hoverCardHideButton.value"
                                    bordered
                                    :label="$tc(snippetPrefix + 'label.hoverCardHideButton')"
                            />
                        </sw-container>
                    </sw-container>
                {% endblock %}
            </template>
        </sw-tabs>

        <sw-media-modal-v2
                variant="full"
                v-if="mediaModalIsOpen"
                :caption="$tc('sw-cms.elements.general.config.caption.mediaUpload')"
                :entityContext="cmsPageState.entityName"
                :allowMultiSelect="false"
                :initialFolderId="cmsPageState.defaultMediaFolderId"
                @media-upload-remove-image="onImageRemove"
                @media-modal-selection-change="onSelectionChanges"
                @modal-close="onCloseModal"
        />
    </div>
{% endblock %}
